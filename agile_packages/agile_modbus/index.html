<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://loogg.github.io/agile_packages/agile_modbus/"><meta property="og:site_name" content="马龙伟的博客"><meta property="og:title" content="Agile Modbus"><meta property="og:description" content="Agile Modbus 1. Introduction Agile Modbus is a lightweight modbus protocol stack that meets the needs of users in any scenario. ModbusProtocol Online documentation: API Manual The examples folder provides examples on PC See examples on MCU mcu_demos Bootloader based on RT-Thread on AT32F437 that supports Modbus firmware upgrade: AT32F437_Boot Bootloader based on RT-Thread on HPM6750 that supports Modbus firmware upgrade: HPM6750_Boot"><meta property="og:type" content="website"><meta property="og:image" content="https://loogg.github.io/"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Agile Modbus"><meta property="article:author" content="马龙伟"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Agile Modbus","description":"Agile Modbus 1. Introduction Agile Modbus is a lightweight modbus protocol stack that meets the needs of users in any scenario. ModbusProtocol Online documentation: API Manual The examples folder provides examples on PC See examples on MCU mcu_demos Bootloader based on RT-Thread on AT32F437 that supports Modbus firmware upgrade: AT32F437_Boot Bootloader based on RT-Thread on HPM6750 that supports Modbus firmware upgrade: HPM6750_Boot"}</script><link rel="icon" href="/logo.png"><title>Agile Modbus | 马龙伟的博客</title><meta name="description" content="Agile Modbus 1. Introduction Agile Modbus is a lightweight modbus protocol stack that meets the needs of users in any scenario. ModbusProtocol Online documentation: API Manual The examples folder provides examples on PC See examples on MCU mcu_demos Bootloader based on RT-Thread on AT32F437 that supports Modbus firmware upgrade: AT32F437_Boot Bootloader based on RT-Thread on HPM6750 that supports Modbus firmware upgrade: HPM6750_Boot">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-078e6d1a.css" as="style"><link rel="stylesheet" href="/assets/style-078e6d1a.css">
    <link rel="modulepreload" href="/assets/app-9321368f.js"><link rel="modulepreload" href="/assets/index.html-843d1eda.js"><link rel="modulepreload" href="/assets/index.html-9978b0af.js"><link rel="prefetch" href="/assets/index.html-5c34d7c8.js" as="script"><link rel="prefetch" href="/assets/about.html-d3a0fabf.js" as="script"><link rel="prefetch" href="/assets/intro.html-65d61130.js" as="script"><link rel="prefetch" href="/assets/index.html-e10f6af9.js" as="script"><link rel="prefetch" href="/assets/chicken_soup.html-3c75f70e.js" as="script"><link rel="prefetch" href="/assets/steak_pickling.html-2c1a2b48.js" as="script"><link rel="prefetch" href="/assets/index.html-3e45a2fb.js" as="script"><link rel="prefetch" href="/assets/index.html-1fce3ab1.js" as="script"><link rel="prefetch" href="/assets/index.html-92f893ee.js" as="script"><link rel="prefetch" href="/assets/index.html-2443fb9c.js" as="script"><link rel="prefetch" href="/assets/RT-Thread.html-09cfcfae.js" as="script"><link rel="prefetch" href="/assets/index.html-c9a14324.js" as="script"><link rel="prefetch" href="/assets/index.html-727fcb65.js" as="script"><link rel="prefetch" href="/assets/index.html-7b990d48.js" as="script"><link rel="prefetch" href="/assets/index.html-559f070b.js" as="script"><link rel="prefetch" href="/assets/index.html-239cca22.js" as="script"><link rel="prefetch" href="/assets/index.html-14323aa9.js" as="script"><link rel="prefetch" href="/assets/index.html-fbf4a713.js" as="script"><link rel="prefetch" href="/assets/index.html-444eae87.js" as="script"><link rel="prefetch" href="/assets/杂项.html-6d1c33f4.js" as="script"><link rel="prefetch" href="/assets/柔性数组.html-1f53de31.js" as="script"><link rel="prefetch" href="/assets/结构体成员对齐.html-f7643c76.js" as="script"><link rel="prefetch" href="/assets/达夫设备.html-86227ac0.js" as="script"><link rel="prefetch" href="/assets/index.html-bce1d819.js" as="script"><link rel="prefetch" href="/assets/index.html-d813c0f3.js" as="script"><link rel="prefetch" href="/assets/各版本配置项分析.html-00445e4e.js" as="script"><link rel="prefetch" href="/assets/各版本问题整理.html-3aa29016.js" as="script"><link rel="prefetch" href="/assets/裁剪分析.html-4f084af8.js" as="script"><link rel="prefetch" href="/assets/index.html-d9cb23f1.js" as="script"><link rel="prefetch" href="/assets/index.html-8ec6039f.js" as="script"><link rel="prefetch" href="/assets/agile_modbus.html-77636226.js" as="script"><link rel="prefetch" href="/assets/index.html-6a2b8dd8.js" as="script"><link rel="prefetch" href="/assets/STM32F407_RTT_移植GD32F407以太网_SD卡注意事项.html-33b75a8c.js" as="script"><link rel="prefetch" href="/assets/DeepLX.html-1694e4b2.js" as="script"><link rel="prefetch" href="/assets/Nougat-OCR.html-c2d60c79.js" as="script"><link rel="prefetch" href="/assets/index.html-1fc181f5.js" as="script"><link rel="prefetch" href="/assets/use.html-172e2239.js" as="script"><link rel="prefetch" href="/assets/MarkdownToPDF.html-2fb3e026.js" as="script"><link rel="prefetch" href="/assets/MarkdownViewer.html-601c9f81.js" as="script"><link rel="prefetch" href="/assets/index.html-8e4506d2.js" as="script"><link rel="prefetch" href="/assets/index.html-f0384b89.js" as="script"><link rel="prefetch" href="/assets/dataengines_develop.html-45fa3785.js" as="script"><link rel="prefetch" href="/assets/C_Cpp代码格式化.html-5735460c.js" as="script"><link rel="prefetch" href="/assets/index.html-c49ec944.js" as="script"><link rel="prefetch" href="/assets/index.html-5880c546.js" as="script"><link rel="prefetch" href="/assets/git使用socks代理.html-83f8846a.js" as="script"><link rel="prefetch" href="/assets/404.html-114f6928.js" as="script"><link rel="prefetch" href="/assets/index.html-0f0dc8b1.js" as="script"><link rel="prefetch" href="/assets/index.html-accf1342.js" as="script"><link rel="prefetch" href="/assets/index.html-4a787ab2.js" as="script"><link rel="prefetch" href="/assets/index.html-7c4c86f4.js" as="script"><link rel="prefetch" href="/assets/index.html-baafe401.js" as="script"><link rel="prefetch" href="/assets/index.html-e92fc13b.js" as="script"><link rel="prefetch" href="/assets/index.html-84d5b610.js" as="script"><link rel="prefetch" href="/assets/index.html-e1e3425d.js" as="script"><link rel="prefetch" href="/assets/index.html-a7c573b0.js" as="script"><link rel="prefetch" href="/assets/index.html-0708eee8.js" as="script"><link rel="prefetch" href="/assets/index.html-edc36a0d.js" as="script"><link rel="prefetch" href="/assets/index.html-90458dd6.js" as="script"><link rel="prefetch" href="/assets/index.html-70d7a3f0.js" as="script"><link rel="prefetch" href="/assets/index.html-c8d804d3.js" as="script"><link rel="prefetch" href="/assets/index.html-7da6b491.js" as="script"><link rel="prefetch" href="/assets/index.html-9c86dc63.js" as="script"><link rel="prefetch" href="/assets/index.html-871ff52c.js" as="script"><link rel="prefetch" href="/assets/index.html-c6328602.js" as="script"><link rel="prefetch" href="/assets/index.html-66b61b46.js" as="script"><link rel="prefetch" href="/assets/index.html-30d6f3a0.js" as="script"><link rel="prefetch" href="/assets/index.html-10d19376.js" as="script"><link rel="prefetch" href="/assets/index.html-762e65e9.js" as="script"><link rel="prefetch" href="/assets/index.html-4288a858.js" as="script"><link rel="prefetch" href="/assets/index.html-6a353cd5.js" as="script"><link rel="prefetch" href="/assets/index.html-eb43b028.js" as="script"><link rel="prefetch" href="/assets/index.html-c4a1a92c.js" as="script"><link rel="prefetch" href="/assets/index.html-cb083dc8.js" as="script"><link rel="prefetch" href="/assets/about.html-ccc00c6d.js" as="script"><link rel="prefetch" href="/assets/intro.html-24d333de.js" as="script"><link rel="prefetch" href="/assets/index.html-e554931d.js" as="script"><link rel="prefetch" href="/assets/chicken_soup.html-c99a020e.js" as="script"><link rel="prefetch" href="/assets/steak_pickling.html-7b7fc71a.js" as="script"><link rel="prefetch" href="/assets/index.html-371cbeb9.js" as="script"><link rel="prefetch" href="/assets/index.html-8bde66a0.js" as="script"><link rel="prefetch" href="/assets/index.html-ed2c92ec.js" as="script"><link rel="prefetch" href="/assets/index.html-d652d21f.js" as="script"><link rel="prefetch" href="/assets/RT-Thread.html-bb4b69a1.js" as="script"><link rel="prefetch" href="/assets/index.html-8b73f517.js" as="script"><link rel="prefetch" href="/assets/index.html-3ad13111.js" as="script"><link rel="prefetch" href="/assets/index.html-ea5b5693.js" as="script"><link rel="prefetch" href="/assets/index.html-c7f3d5f4.js" as="script"><link rel="prefetch" href="/assets/index.html-3ddcc215.js" as="script"><link rel="prefetch" href="/assets/index.html-d8611961.js" as="script"><link rel="prefetch" href="/assets/index.html-098a47f1.js" as="script"><link rel="prefetch" href="/assets/index.html-69a2a22f.js" as="script"><link rel="prefetch" href="/assets/杂项.html-fc59790a.js" as="script"><link rel="prefetch" href="/assets/柔性数组.html-414bfd17.js" as="script"><link rel="prefetch" href="/assets/结构体成员对齐.html-28d0a133.js" as="script"><link rel="prefetch" href="/assets/达夫设备.html-3f02c01b.js" as="script"><link rel="prefetch" href="/assets/index.html-181abecc.js" as="script"><link rel="prefetch" href="/assets/index.html-1835a832.js" as="script"><link rel="prefetch" href="/assets/各版本配置项分析.html-6727eea9.js" as="script"><link rel="prefetch" href="/assets/各版本问题整理.html-59742752.js" as="script"><link rel="prefetch" href="/assets/裁剪分析.html-dcd8325a.js" as="script"><link rel="prefetch" href="/assets/index.html-9aadc156.js" as="script"><link rel="prefetch" href="/assets/index.html-5245cba1.js" as="script"><link rel="prefetch" href="/assets/agile_modbus.html-1f4362be.js" as="script"><link rel="prefetch" href="/assets/index.html-fe5af010.js" as="script"><link rel="prefetch" href="/assets/STM32F407_RTT_移植GD32F407以太网_SD卡注意事项.html-16f03342.js" as="script"><link rel="prefetch" href="/assets/DeepLX.html-9f22d2e9.js" as="script"><link rel="prefetch" href="/assets/Nougat-OCR.html-a597c89d.js" as="script"><link rel="prefetch" href="/assets/index.html-daee0ae9.js" as="script"><link rel="prefetch" href="/assets/use.html-3c2b68d4.js" as="script"><link rel="prefetch" href="/assets/MarkdownToPDF.html-d346b5ee.js" as="script"><link rel="prefetch" href="/assets/MarkdownViewer.html-701f184d.js" as="script"><link rel="prefetch" href="/assets/index.html-00321ab2.js" as="script"><link rel="prefetch" href="/assets/index.html-10bd2df0.js" as="script"><link rel="prefetch" href="/assets/dataengines_develop.html-6bb695bb.js" as="script"><link rel="prefetch" href="/assets/C_Cpp代码格式化.html-d8f90e1f.js" as="script"><link rel="prefetch" href="/assets/index.html-3da75b16.js" as="script"><link rel="prefetch" href="/assets/index.html-44e3e41c.js" as="script"><link rel="prefetch" href="/assets/git使用socks代理.html-271143ab.js" as="script"><link rel="prefetch" href="/assets/404.html-43cc7c51.js" as="script"><link rel="prefetch" href="/assets/index.html-82d46313.js" as="script"><link rel="prefetch" href="/assets/index.html-5635c17b.js" as="script"><link rel="prefetch" href="/assets/index.html-7524f511.js" as="script"><link rel="prefetch" href="/assets/index.html-bcacaf76.js" as="script"><link rel="prefetch" href="/assets/index.html-e88fb3cf.js" as="script"><link rel="prefetch" href="/assets/index.html-10cec873.js" as="script"><link rel="prefetch" href="/assets/index.html-80c49c5b.js" as="script"><link rel="prefetch" href="/assets/index.html-b6ea9aa9.js" as="script"><link rel="prefetch" href="/assets/index.html-071b7c1e.js" as="script"><link rel="prefetch" href="/assets/index.html-c0e2016e.js" as="script"><link rel="prefetch" href="/assets/index.html-83a55bc7.js" as="script"><link rel="prefetch" href="/assets/index.html-8707fb19.js" as="script"><link rel="prefetch" href="/assets/index.html-8c4d1249.js" as="script"><link rel="prefetch" href="/assets/index.html-4a0c6811.js" as="script"><link rel="prefetch" href="/assets/index.html-9b783ba7.js" as="script"><link rel="prefetch" href="/assets/index.html-3df898af.js" as="script"><link rel="prefetch" href="/assets/index.html-5f854c66.js" as="script"><link rel="prefetch" href="/assets/index.html-249e2a4f.js" as="script"><link rel="prefetch" href="/assets/index.html-3fe357db.js" as="script"><link rel="prefetch" href="/assets/index.html-2ef77065.js" as="script"><link rel="prefetch" href="/assets/index.html-3ae1f9a5.js" as="script"><link rel="prefetch" href="/assets/index.html-9367eecc.js" as="script"><link rel="prefetch" href="/assets/index.html-afac547f.js" as="script"><link rel="prefetch" href="/assets/index.html-8f54fdda.js" as="script"><link rel="prefetch" href="/assets/index.html-6bcd84ea.js" as="script"><link rel="prefetch" href="/assets/index.html-80217752.js" as="script"><link rel="prefetch" href="/assets/plyr.min-fe499837.js" as="script"><link rel="prefetch" href="/assets/waline-meta-56fbc549.js" as="script"><link rel="prefetch" href="/assets/component-0d1a9a7b.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-b539338e.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-747e7583.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/pageview-6851c11b.js" as="script"><link rel="prefetch" href="/assets/SearchResult-2d7278ec.js" as="script"><link rel="prefetch" href="/assets/index-bee40668.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt="马龙伟的博客"><!----><span class="vp-site-name hide-in-pad">马龙伟的博客</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="agile 全家桶"><span class="title"><span class="font-icon icon iconfont icon-stack" style=""></span>agile 全家桶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link active" href="/agile_packages/"><span class="font-icon icon iconfont icon-info" style=""></span>关于<!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_button" rel="noopener noreferrer" target="_blank" aria-label="agile_button" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_button<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_console" rel="noopener noreferrer" target="_blank" aria-label="agile_console" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_console<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_ftp" rel="noopener noreferrer" target="_blank" aria-label="agile_ftp" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_ftp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_jsmn" rel="noopener noreferrer" target="_blank" aria-label="agile_jsmn" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_jsmn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_led" rel="noopener noreferrer" target="_blank" aria-label="agile_led" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_led<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_modbus" rel="noopener noreferrer" target="_blank" aria-label="agile_modbus" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_modbus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_telnet" rel="noopener noreferrer" target="_blank" aria-label="agile_telnet" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_telnet<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com/loogg/agile_upgrade" rel="noopener noreferrer" target="_blank" aria-label="agile_upgrade" class="nav-link"><span class="font-icon icon iconfont icon-github" style=""></span>agile_upgrade<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/tutorial.html"><span class="font-icon icon iconfont icon-software" style=""></span>软件/工具教程<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/note.html"><span class="font-icon icon iconfont icon-read" style=""></span>学习笔记<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="关于"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>关于</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/about/intro.html"><span class="font-icon icon iconfont icon-people" style=""></span>关于我<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/about/about.html"><span class="font-icon icon iconfont icon-info" style=""></span>关于本站<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/video.html"><span class="font-icon icon iconfont icon-actions" style=""></span>视频教程<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/loogg/loogg.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_button/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Button<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_console/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Console<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_ftp/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Ftp<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_jsmn/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Jsmn<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_led/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Led<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/agile_packages/agile_modbus/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Modbus<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_1-introduction"><!---->1. Introduction<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_1-1-features"><!---->1.1. Features<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_1-2-directory-structure"><!---->1.2. Directory structure<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_1-3-license"><!---->1.3. License<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-use-agile-modbus"><!---->2. Use Agile Modbus<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-1-transplantation"><!---->2.1. Transplantation<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-2-host"><!---->2.2. Host<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-3-slave-machine"><!---->2.3. Slave machine<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-4-example"><!---->2.4. Example<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_2-5-doxygen-document-generation"><!---->2.5. Doxygen document generation<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_3-support"><!---->3. Support<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/agile_packages/agile_modbus/#_4-contact-information-thanks"><!---->4. Contact information &amp; thanks<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_telnet/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Telnet<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/agile_packages/agile_upgrade/"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Upgrade<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-module" style=""></span>Agile Modbus</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://loogg.github.io" target="_blank" rel="noopener noreferrer">马龙伟</a></span><span property="author" content="马龙伟"></span></span><!----><!----><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/agile_packages/agile_modbus/">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 7 分钟</span><meta property="timeRequired" content="PT7M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_1-introduction">1. Introduction</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-1-features">1.1. Features</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-2-directory-structure">1.2. Directory structure</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-license">1.3. License</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_2-use-agile-modbus">2. Use Agile Modbus</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-1-transplantation">2.1. Transplantation</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-2-host">2.2. Host</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-3-slave-machine">2.3. Slave machine</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-4-example">2.4. Example</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_2-5-doxygen-document-generation">2.5. Doxygen document generation</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_3-support">3. Support</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_4-contact-information-thanks">4. Contact information &amp; thanks</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="agile-modbus" tabindex="-1"><a class="header-anchor" href="#agile-modbus" aria-hidden="true">#</a> Agile Modbus</h1><h2 id="_1-introduction" tabindex="-1"><a class="header-anchor" href="#_1-introduction" aria-hidden="true">#</a> 1. Introduction</h2><p>Agile Modbus is a lightweight modbus protocol stack that meets the needs of users in any scenario.</p><figure><img src="/assets/ModbusProtocol-7900ee6e.jpg" alt="ModbusProtocol" tabindex="0" loading="lazy"><figcaption>ModbusProtocol</figcaption></figure><ul><li><p>Online documentation: <a href="https://loogg.github.io/agile_modbus/" target="_blank" rel="noopener noreferrer">API Manual<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>The <code>examples</code> folder provides examples on PC</p></li><li><p>See examples on MCU <a href="https://github.com/loogg/agile_modbus_mcu_demos" target="_blank" rel="noopener noreferrer">mcu_demos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>Bootloader based on RT-Thread on AT32F437 that supports Modbus firmware upgrade: <a href="https://github.com/loogg/AT32F437_Boot" target="_blank" rel="noopener noreferrer">AT32F437_Boot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>Bootloader based on RT-Thread on HPM6750 that supports Modbus firmware upgrade: <a href="https://github.com/loogg/HPM6750_Boot" target="_blank" rel="noopener noreferrer">HPM6750_Boot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><h3 id="_1-1-features" tabindex="-1"><a class="header-anchor" href="#_1-1-features" aria-hidden="true">#</a> 1.1. Features</h3><ol><li>Supports rtu and tcp protocols, is developed using pure C, does not involve any hardware interface, and can be used directly on any form of hardware.</li><li>Since it is developed using pure C and does not involve hardware, it can run the tcp protocol on the serial port and the rtu protocol on the network.</li><li>Support custom protocols compliant with modbus format.</li><li>Supports multiple masters and multiple slaves at the same time.</li><li>It is easy to use. You only need to initialize the rtu or tcp handle and call the corresponding API to package and unpack.</li></ol><h3 id="_1-2-directory-structure" tabindex="-1"><a class="header-anchor" href="#_1-2-directory-structure" aria-hidden="true">#</a> 1.2. Directory structure</h3><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>doc</td><td>documentation</td></tr><tr><td>examples</td><td>examples</td></tr><tr><td>figures</td><td>materials</td></tr><tr><td>inc</td><td>header file</td></tr><tr><td>src</td><td>source code</td></tr><tr><td>util</td><td>Provides simple and practical components</td></tr></tbody></table><h3 id="_1-3-license" tabindex="-1"><a class="header-anchor" href="#_1-3-license" aria-hidden="true">#</a> 1.3. License</h3><p>Agile Modbus complies with the <code>Apache-2.0</code> license, see the <code>LICENSE</code> file for details.</p><h2 id="_2-use-agile-modbus" tabindex="-1"><a class="header-anchor" href="#_2-use-agile-modbus" aria-hidden="true">#</a> 2. Use Agile Modbus</h2><p>Please view the help document <a href="./doc/doxygen/Agile_Modbus.chm">doc/doxygen/Agile_Modbus.chm</a></p><h3 id="_2-1-transplantation" tabindex="-1"><a class="header-anchor" href="#_2-1-transplantation" aria-hidden="true">#</a> 2.1. Transplantation</h3><ul><li><p>Users need to implement the <code>send data</code>, <code>wait for data reception to end</code> and <code>clear the receive buffer</code> functions of the hardware interface</p><p>Regarding <code>waiting for data reception to end</code>, the following ideas are provided:</p><ol><li><p>General method</p><p>Every 20 /50 ms (this time can be set according to the baud rate and hardware, here is just a reference value) reads data from the hardware interface and stores it in the buffer and updates the offset until it cannot be read or the buffer is full. , exit reading.</p><p>This applies to both bare metal and operating systems, which can accomplish blocking via <code>select</code> or <code>semaphore</code>.</p></li><li><p>Serial port <code>DMA + IDLE</code> interrupt mode</p><p>Configure the <code>DMA + IDLE</code> interrupt, enable the flag in the interrupt, and determine whether the flag is set in the application program.</p><p>However, this solution is prone to problems. If the data bytes are slightly staggered, it will not be a frame. The first option is recommended.</p></li></ol></li><li><p>Host:</p><ol><li><code>agile_modbus_rtu_init</code> / <code>agile_modbus_tcp_init</code> initializes <code>RTU/TCP</code> environment</li><li><code>agile_modbus_set_slave</code> sets the slave address</li><li><code>Clear the receive cache</code></li><li><code>agile_modbus_serialize_xxx</code> package request data</li><li><code>Send data</code></li><li><code>Waiting for data reception to end</code></li><li><code>agile_modbus_deserialize_xxx</code> Parse response data</li><li>Data processed by users</li></ol></li><li><p>Slave machine:</p><ol><li>Implement the <code>agile_modbus_slave_callback_t</code> type callback function</li><li><code>agile_modbus_rtu_init</code> / <code>agile_modbus_tcp_init</code> initializes <code>RTU/TCP</code> environment</li><li><code>agile_modbus_set_slave</code> sets the slave address</li><li><code>Waiting for data reception to end</code></li><li><code>agile_modbus_slave_handle</code> processes request data</li><li><code>Clear the receive buffer</code> (optional)</li><li><code>Send data</code></li></ol></li><li><p>Special function code</p><p>You need to call the <code>agile_modbus_set_compute_meta_length_after_function_cb</code> and <code>agile_modbus_set_compute_data_length_after_meta_cb</code> APIs to set the callbacks for special function codes to be processed in master-slave mode.</p><ul><li><p><code>agile_modbus_set_compute_meta_length_after_function_cb</code></p><p><code>msg_type == AGILE_MODBUS_MSG_INDICATION</code>: Returns the data element length of the host request message (uint8_t type). If it is not a special function code, 0 must be returned.</p><p><code>msg_type == MSG_CONFIRMATION</code>: Returns the data element length (uint8_t type) of the slave response message. If it is not a special function code, 1 must be returned.</p></li><li><p><code>agile_modbus_set_compute_data_length_after_meta_cb</code></p><p><code>msg_type == AGILE_MODBUS_MSG_INDICATION</code>: Returns the data length after the data element of the host request message. If it is not a special function code, 0 must be returned.</p><p><code>msg_type == MSG_CONFIRMATION</code>: Returns the data length after the data element of the slave response message. If it is not a special function code, it must return 0.</p></li></ul></li><li><p><code>agile_modbus_rtu_init</code> / <code>agile_modbus_tcp_init</code></p><p>When initializing the <code>RTU/TCP</code> environment, the user needs to pass in the <code>send buffer</code> and <code>receive buffer</code>. It is recommended that the size of both buffers is <code>AGILE_MODBUS_MAX_ADU_LENGTH</code> (260) bytes. <code>Special function code</code> is determined by the user according to the agreement.</p><p>But for small memory MCUs, these two buffers can also be set small, and all APIs will judge the buffer size:</p><p>Send buffer setting: If <code>expected request data length</code> or <code>expected response data length</code> is greater than <code>set send buffer size</code>, an exception is returned.</p><p>Receive buffer setting: If the <code>message length requested by the host</code> is greater than the <code>set receive buffer size</code>, an exception will be returned. This is reasonable. When a small memory MCU is used as a slave, certain function codes must be restricted.</p></li></ul><h3 id="_2-2-host" tabindex="-1"><a class="header-anchor" href="#_2-2-host" aria-hidden="true">#</a> 2.2. Host</h3><p>See <code>2.1. Transplantation</code>.</p><h3 id="_2-3-slave-machine" tabindex="-1"><a class="header-anchor" href="#_2-3-slave-machine" aria-hidden="true">#</a> 2.3. Slave machine</h3><h4 id="_2-3-1-interface-description" tabindex="-1"><a class="header-anchor" href="#_2-3-1-interface-description" aria-hidden="true">#</a> 2.3.1. Interface description</h4><ul><li><p>Introduction to <code>agile_modbus_slave_handle</code></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">agile_modbus_slave_handle</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">agile_modbus_t</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">ctx</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">msg_length</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">uint8_t</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">slave_strict</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">                              </span><span style="color:#56B6C2;">agile_modbus_slave_callback_t</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">slave_cb</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">slave_data</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">frame_length</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>msg_length: The length of data received after <code>waiting for the end of data reception</code>.</p><p>slave_strict: slave address strictness check (0: Do not judge whether the address is consistent, it will be processed by user callback; 1: The address must be consistent, otherwise the callback will not be called and the response data will not be packaged).</p><p>slave_cb: <code>agile_modbus_slave_callback_t</code> type callback function, implemented and passed in by the user. If it is NULL, all function codes can respond and are successful, but the register data is still 0.</p><p>slave_data: slave callback function private data.</p><p>frame_length: Get the length of the parsed modbus data frame. The meaning of this parameter is:</p><ol><li>There is dirty data at the end: it can still be parsed successfully and tells the user the real modbus frame length, which the user can process.</li><li>Data sticky packet: The data consists of a complete frame of modbus data + a partial modbus data frame. After the user obtains the real modbus frame length, he can remove the processed modbus data frame and read the hardware interface data and the current one again. Part of the modbus data frame forms a new frame</li><li>This parameter is often used when modbus broadcast transmits big data (such as custom function code broadcast to upgrade firmware). Ordinary slave responses are one question and one answer, and only the complete data frame is processed. It is recommended to Execute <code>clear receive cache</code></li></ol></li><li><p>Introduction to <code>agile_modbus_slave_callback_t</code></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@brief</span><span style="color:#7F848E;font-style:italic;">   slave callback function</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;">   </span><span style="color:#E06C75;font-style:italic;">ctx</span><span style="color:#7F848E;font-style:italic;"> modbus handle</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;">   </span><span style="color:#E06C75;font-style:italic;">slave_info</span><span style="color:#7F848E;font-style:italic;"> slave information body</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;">   </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#7F848E;font-style:italic;"> private data</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@return</span><span style="color:#7F848E;font-style:italic;">  =0: normal;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> *          &lt;0: Abnormal</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> *             (-AGILE_MODBUS_EXCEPTION_UNKNOW(-255): Unknown exception, the slave will not package the response data)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> *             (Other negative exception codes: package exception response data from the opportunity)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#56B6C2;">agile_modbus_slave_callback_t</span><span style="color:#ABB2BF;">)(</span><span style="color:#56B6C2;">agile_modbus_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">ctx, </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_info </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">slave_info, </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">data);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>agile_modbus_slave_info</code>:</p><p>sft: Contains slave address and function code attributes, which can be used in callbacks</p><p>rsp_length: response data length pointer, its value needs to be updated when processing <code>special function code</code> in the callback, otherwise <strong>not allowed to change</strong></p><p>address: register address (not used by all function codes)</p><p>nb: number (not used by all function codes)</p><p>buf: data field required by different function codes (not used by all function codes)</p><p>send_index: the current index of the send buffer (not used by all function codes)</p></li><li><p><code>agile_modbus_slave_info</code> used by different function codes</p><ul><li><p>AGILE_MODBUS_FC_READ_COILS、AGILE_MODBUS_FC_READ_DISCRETE_INPUTS</p><p>The <code>address</code>, <code>nb</code>, and <code>send_index</code> attributes need to be used, and the <code>agile_modbus_slave_io_set</code> API needs to be called to store the IO data in the data area starting from <code>ctx-&gt;send_buf + send_index</code>.</p></li><li><p>AGILE_MODBUS_FC_READ_HOLDING_REGISTERS、AGILE_MODBUS_FC_READ_INPUT_REGISTERS</p><p>The <code>address</code>, <code>nb</code>, and <code>send_index</code> attributes need to be used, and the <code>agile_modbus_slave_register_set</code> API needs to be called to store the register data in the data area starting from <code>ctx-&gt;send_buf + send_index</code>.</p></li><li><p>AGILE_MODBUS_FC_WRITE_SINGLE_COIL、AGILE_MODBUS_FC_WRITE_SINGLE_REGISTER</p><p>You need to use the <code>address</code> and <code>buf</code> attributes, force <code>buf</code> to the <code>int *</code> type, and get the value and store it in a register.</p></li><li><p>AGILE_MODBUS_FC_WRITE_MULTIPLE_COILS</p><p>The <code>address</code>, <code>nb</code>, <code>buf</code> attributes need to be used, and the <code>agile_modbus_slave_io_get</code> API needs to be called to obtain the IO data to be written.</p></li><li><p>AGILE_MODBUS_FC_WRITE_MULTIPLE_REGISTERS</p><p>The <code>address</code>, <code>nb</code>, and <code>buf</code> attributes need to be used, and the <code>agile_modbus_slave_register_get</code> API needs to be called to obtain the register data to be written.</p></li><li><p>AGILE_MODBUS_FC_MASK_WRITE_REGISTER</p><p>You need to use the <code>address</code> and <code>buf</code> attributes, pass <code>(buf[0] &lt;&lt; 8) + buf[1]</code> to get the <code>and</code> value, pass <code>(buf[2] &lt;&lt; 8) + buf[3 ]</code> Gets the <code>or</code> value. Get the register value <code>data</code>, perform the <code>data = (data &amp; and) | (or &amp; (~and))</code> operation to update the <code>data</code> value, and write it to the register.</p></li><li><p>AGILE_MODBUS_FC_WRITE_AND_READ_REGISTERS</p><p>You need to use the <code>address</code>, <code>buf</code>, <code>send_index</code> attributes, pass <code>(buf[0] &lt;&lt; 8) + buf[1]</code> to get the number of registers to be read, pass <code>(buf[2] &lt;&lt; 8) + buf[3]</code> Get the register address to be written, and use <code>(buf[4] &lt;&lt; 8) + buf[5]</code> to get the number of registers to be written. You need to call the <code>agile_modbus_slave_register_get</code> API to obtain the register data to be written, and call the <code>agile_modbus_slave_register_set</code> API to store the register data in the data area starting from <code>ctx-&gt;send_buf + send_index</code>.</p></li><li><p>Custom function code</p><p>You need to use the <code>send_index</code>, <code>nb</code>, and <code>buf</code> attributes, and the user processes the data in the callback.</p><p>send_index: current index of send buffer</p><p>nb: PUD - 1, which is the modbus data field length</p><p>buf: starting position of modbus data field</p><p><strong>Note</strong>: After the user fills data into the send buffer in the callback, the <code>rsp_length</code> value of <code>agile_modbus_slave_info</code> needs to be updated.</p></li></ul></li></ul><h4 id="_2-3-2-simple-slave-access-interface" tabindex="-1"><a class="header-anchor" href="#_2-3-2-simple-slave-access-interface" aria-hidden="true">#</a> 2.3.2. Simple slave access interface</h4><p>Agile Modbus provides an implementation of <code>agile_modbus_slave_callback_t</code>, allowing users to access it simply and conveniently.</p><p>See <a href="./examples/slave">examples/slave</a> for examples of usage.</p><p>How to use:</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;agile_modbus.h&quot;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;agile_modbus_slave_util.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">agile_modbus_slave_util_t</span><span style="color:#ABB2BF;"> slave_util </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /* User implementation */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">agile_modbus_slave_handle</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ctx</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> read_len</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> agile_modbus_slave_util_callback</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;font-style:italic;">slave_util</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Introduction to <code>agile_modbus_slave_util_callback</code></p><ul><li><p>An implementation of <code>agile_modbus_slave_callback_t</code> provided by Agile Modbus, which requires <code>agile_modbus_slave_util_t</code> type variable pointer as private data.</p></li><li><p>The private data is NULL, all function codes can respond and are successful, but the register data is still 0.</p></li></ul></li><li><p>Introduction to <code>agile_modbus_slave_util_t</code></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_util {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">agile_modbus_slave_util_map_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">tab_bits;</span><span style="color:#7F848E;font-style:italic;">                                            /**&lt; Coil register definition array */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> nb_bits;</span><span style="color:#7F848E;font-style:italic;">                                                                              /**&lt; Number of coil register definition arrays */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">agile_modbus_slave_util_map_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">tab_input_bits;</span><span style="color:#7F848E;font-style:italic;">                                      /**&lt; Discrete input register definition array */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> nb_input_bits;</span><span style="color:#7F848E;font-style:italic;">                                                                        /**&lt; Number of discrete input register definition arrays */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">agile_modbus_slave_util_map_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">tab_registers;</span><span style="color:#7F848E;font-style:italic;">                                       /**&lt; Holding register definition array */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> nb_registers;</span><span style="color:#7F848E;font-style:italic;">                                                                         /**&lt; Number of holding register definition arrays */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">agile_modbus_slave_util_map_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">tab_input_registers;</span><span style="color:#7F848E;font-style:italic;">                                 /**&lt; Input register definition array */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> nb_input_registers;</span><span style="color:#7F848E;font-style:italic;">                                                                   /**&lt; Number of input register definition arrays */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">addr_check)(</span><span style="color:#56B6C2;">agile_modbus_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">ctx, </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_info </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">slave_info);</span><span style="color:#7F848E;font-style:italic;">       /**&lt; Address check interface */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">special_function)(</span><span style="color:#56B6C2;">agile_modbus_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">ctx, </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_info </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">slave_info);</span><span style="color:#7F848E;font-style:italic;"> /**&lt; Special function code processing interface */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">done)(</span><span style="color:#56B6C2;">agile_modbus_t</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">ctx, </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_info </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">slave_info, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ret);</span><span style="color:#7F848E;font-style:italic;">    /**&lt; Processing end interface */</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">agile_modbus_slave_util_t</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Register related</p><p>Users need to implement the definitions of <code>bits</code>, <code>input_bits</code>, <code>registers</code> and <code>input_registers</code>. If a register is defined as NULL, the function code corresponding to the register can respond and is successful, but the register data is all 0.</p></li><li><p>Interface calling process</p><figure><img src="/assets/agile_modbus_slave_util_callback-ac6cb563.png" alt="agile_modbus_slave_util_callback" tabindex="0" loading="lazy"><figcaption>agile_modbus_slave_util_callback</figcaption></figure></li></ul></li><li><p>Introduction to <code>agile_modbus_slave_util_map</code></p><div class="language-c line-numbers-mode" data-ext="c"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> agile_modbus_slave_util_map {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> start_addr;</span><span style="color:#7F848E;font-style:italic;">                                       /**&lt; starting address */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> end_addr;</span><span style="color:#7F848E;font-style:italic;">                                         /**&lt; end address */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">get)(</span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">buf, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> bufsz);</span><span style="color:#7F848E;font-style:italic;">                     /**&lt; Get register data interface */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">set)(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> index, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> len, </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">buf, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> bufsz);</span><span style="color:#7F848E;font-style:italic;"> /**&lt; Set register data interface */</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">agile_modbus_slave_util_map_t</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>Precautions</strong>:</p><ul><li><p>The number of registers determined by the start address and end address is limited. Changing the size of the <code>map_buf</code> array inside the function can make it larger.</p><ul><li><p>bit register &lt; 250</p></li><li><p>register register &lt; 125</p></li></ul></li><li><p>The interface function is NULL, and the function code corresponding to the register can respond and is successful.</p></li></ul></li><li><p><code>get</code> interface</p><p>Copy all data in the address field to <code>buf</code>.</p></li><li><p><code>set</code> interface</p><ul><li><p><code>index</code>: offset within the address field</p></li><li><p><code>len</code>: length</p></li></ul><p>Modify data based on <code>index</code> and <code>len</code>.</p></li></ul></li></ul><h3 id="_2-4-example" tabindex="-1"><a class="header-anchor" href="#_2-4-example" aria-hidden="true">#</a> 2.4. Example</h3><ul><li><p>Examples on PC are provided in the <a href="./examples">examples</a> folder, which can be compiled and run under <code>WSL</code> or <code>Linux</code>.</p><ul><li><p>Examples of RTU/TCP master and slave</p></li><li><p>Examples of special function codes</p><p>RTU point-to-point transmission of files: Demonstrates the use of special function codes</p><p>RTU broadcast transmission file: Demonstrates the use of <code>frame_length</code> in <code>agile_modbus_slave_handle</code></p></li></ul></li><li><p><a href="https://github.com/loogg/agile_modbus_mcu_demos" target="_blank" rel="noopener noreferrer">mcu_demos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> provides examples on MCU.</p></li><li><p><a href="https://github.com/loogg/AT32F437_Boot" target="_blank" rel="noopener noreferrer">AT32F437_Boot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> A Bootloader based on RT-Thread implemented on AT32F437 that supports Modbus firmware upgrade.</p></li><li><p><a href="https://github.com/loogg/HPM6750_Boot" target="_blank" rel="noopener noreferrer">HPM6750_Boot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> A Bootloader based on RT-Thread implemented on HPM6750 that supports Modbus firmware upgrade.</p></li></ul><h3 id="_2-5-doxygen-document-generation" tabindex="-1"><a class="header-anchor" href="#_2-5-doxygen-document-generation" aria-hidden="true">#</a> 2.5. Doxygen document generation</h3><ul><li>Use <code>Doxywizard</code> to open <a href="./doc/doxygen/Doxyfile">Doxyfile</a> and run it. The generated file will be under <a href="./doc/doxygen/output">doxygen/output</a>.</li><li><code>Graphviz</code> path needs to be changed.</li><li><code>HTML</code> is generated without using <code>chm</code> format. If it is enabled, you need to change the <code>hhc.exe</code> path.</li></ul><h2 id="_3-support" tabindex="-1"><a class="header-anchor" href="#_3-support" aria-hidden="true">#</a> 3. Support</h2><figure><img src="/assets/zanshang-e2e5224e.jpg" alt="zanshang" tabindex="0" loading="lazy"><figcaption>zanshang</figcaption></figure><p>If Agile Modbus solves your problem, you might as well scan the QR code above and invite me for a <strong>cup of coffee</strong> ~</p><h2 id="_4-contact-information-thanks" tabindex="-1"><a class="header-anchor" href="#_4-contact-information-thanks" aria-hidden="true">#</a> 4. Contact information &amp; thanks</h2><ul><li>Maintenance: Ma Longwei</li><li>Home page: <a href="https://github.com/loogg/agile_modbus" target="_blank" rel="noopener noreferrer">https://github.com/loogg/agile_modbus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Email: <a href="mailto:2544047213@qq.com">2544047213@qq.com</a></li></ul></div><!--[--><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/agile_packages/agile_led/"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon iconfont icon-module" style=""></span>Agile Led</div></a><a class="vp-link nav-link next" href="/agile_packages/agile_telnet/"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Agile Telnet<span class="font-icon icon iconfont icon-module" style=""></span></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><div class="wl-reaction"><div class="wl-reaction-title">你认为这篇文章怎么样？</div><ul class="wl-reaction-list"><!--[--><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_agree.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_look_down.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sunglasses.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_pick_nose.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_awkward.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="//unpkg.com/@waline/emojis/tieba/tieba_sleep.png"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text"></div></li><!--]--></ul></div><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">邮箱(可选)</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">网址(可选)</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="欢迎留言~ _(≧∇≦」∠)_ (填写常用邮箱即可快速收到回复通知~)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="表情" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="预览"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  字</div><button type="button" class="wl-btn">登录</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> 评论</div><ul class="wl-sort"><!--[--><li class="active">按正序</li><li class="">按倒序</li><li class="">按热度</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper" style="display:none;"><div class="busuanzi"><span id="busuanzi_container_site_pv" style="display:none;"> 本站总访问量 <span id="busuanzi_value_site_pv"></span>次 <span class="post-meta-divider">|</span></span><span id="busuanzi_container_site_uv" style="display:none;"> 您是本站第 <span id="busuanzi_value_site_uv"></span>位访问者 </span></div><div class="footer-content"><div class="footer">Powered by VuePress|Theme by Hope</div><div class="copyright">Copyright © 2016-2024 马龙伟</div></div><span id="runtime_span"></span></footer></div><!--]--><!--]--><!----><!----><!----><div></div><!--]--></div>
    <script type="module" src="/assets/app-9321368f.js" defer></script>
  </body>
</html>
